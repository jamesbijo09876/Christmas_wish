<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Christmas Countdown</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-1: #0b1320;
    --bg-2: #2b1b3b;
    --accent: #ffd166;
    --muted: rgba(255,255,255,0.8);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:"Poppins", sans-serif;
    background: linear-gradient(180deg, var(--bg-1), var(--bg-2));
    color:white;
    overflow:hidden;
  }

  .wrap{position:relative;height:100vh;display:flex;align-items:center;justify-content:center;padding:48px;box-sizing:border-box;}

  .card{
    width:min(960px,94vw);
    background:rgba(255,255,255,0.03);
    border-radius:18px;
    padding:48px;
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    backdrop-filter:blur(6px);
    position:relative;
    overflow:hidden;
    text-align:center;
  }

  h1{font-family:"Playfair Display";font-weight:900;margin:0;line-height:0.92;font-size:clamp(36px,8vw,84px);}

  p.lead{margin:18px 0 28px;opacity:0.95;font-size:1.05rem;}
  #countdown{font-size:1.3rem;margin:16px 0 28px;font-weight:600;color:#ffd166;}

  button.main-btn{
    margin-top:20px;
    padding:12px 28px;
    background-color:#ffd166;
    border:none;
    border-radius:10px;
    color:#0b1320;
    font-weight:600;
    cursor:pointer;
    font-size:1rem;
    transition:0.2s;
  }
  button.main-btn:hover{transform:scale(1.05);}

  #wishForm{display:none;margin-top:20px;}
  input,textarea{
    width:100%;padding:10px;margin:10px 0;
    border-radius:8px;border:1px solid #ffd166;background:#ffffff15;color:white;
  }

  #createdWish{
    margin-top:25px;
    font-size:1.2rem;
    font-weight:600;
    color:#ffd166;
  }

  .link-box{
    margin-top:10px;
    background:#ffffff15;
    padding:10px;
    border-radius:8px;
    font-size:0.9rem;
    color:#eee;
    word-wrap:break-word;
  }

  #snow-canvas{position:fixed;inset:0;z-index:0;pointer-events:none;}
</style>
</head>
<body>

<canvas id="snow-canvas"></canvas>

<audio id="bg-music" autoplay loop muted>
  <source src="assets/audio/polar-express.mp3" type="audio/mp3">
</audio>

<div class="wrap">
  <div class="card">

    <div id="mainContent">
      <h1>Merry Christmas üéÑ</h1>
      <p class="lead">Celebrate joy, peace, and love this blessed season.</p>
      <div id="countdown"></div>

      <button class="main-btn" onclick="showForm()">Create Christmas Wish</button>
    </div>

    <div id="wishForm">
      <input type="text" id="toName" placeholder="To">
      <textarea id="message" rows="3" placeholder="Your Christmas Message"></textarea>
      <input type="text" id="fromName" placeholder="From">
      <button class="main-btn" onclick="createWish()">Create Link</button>

      <div id="createdWish"></div>
      <div id="wishLink" class="link-box" style="display:none;"></div>
      <button class="main-btn" id="copyBtn" style="display:none;" onclick="copyLink()">Copy Link</button>
    </div>

    <button class="main-btn" id="viewAnother" onclick="resetPage()" style="display:none;">View Another Wish</button>

  </div>
</div>

<script>
// COUNTDOWN
function updateCountdown() {
  const christmas = new Date("December 25, 2025 00:00:00").getTime();
  const now = new Date().getTime();
  const diff = christmas - now;

  if (diff <= 0) {
    document.getElementById("countdown").innerHTML = "üéÖ Merry Christmas! üéÑ";
    return;
  }

  const d = Math.floor(diff / (1000*60*60*24));
  const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
  const m = Math.floor((diff % (1000*60*60)) / (1000*60));
  const s = Math.floor((diff % (1000*60)) / 1000);

  document.getElementById("countdown").innerHTML = `${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// Music Interaction Fix
window.addEventListener("click",()=>{const m=document.getElementById("bg-music");m.muted=false;m.play();},{once:true});

// Show form
function showForm(){
  document.getElementById("wishForm").style.display="block";
}

// Create link
function createWish(){
  const to = encodeURIComponent(document.getElementById("toName").value);
  const msg = encodeURIComponent(document.getElementById("message").value);
  const from = encodeURIComponent(document.getElementById("fromName").value);

  const url = `${window.location.origin}${window.location.pathname}?to=${to}&msg=${msg}&from=${from}`;

  document.getElementById("wishLink").innerText = url;
  document.getElementById("wishLink").style.display="block";
  document.getElementById("copyBtn").style.display="inline-block";
  document.getElementById("viewAnother").style.display="inline-block";

  if(to && msg && from){
    document.getElementById("createdWish").innerHTML =
      `üéÑ Message Created Successfully üéÅ`;
  }
}

// Copy link
function copyLink(){
  navigator.clipboard.writeText(document.getElementById("wishLink").innerText);
  alert("Link copied!");
}

// Reset
function resetPage(){
  window.location.href = window.location.origin + window.location.pathname;
}

// Display wish if URL contains data
const urlParams = new URLSearchParams(window.location.search);
if(urlParams.has("to")){
  const to = decodeURIComponent(urlParams.get("to"));
  const msg = decodeURIComponent(urlParams.get("msg"));
  const from = decodeURIComponent(urlParams.get("from"));

  document.getElementById("mainContent").innerHTML =
    `<h1>üéÅ A Christmas Wish For ${to}</h1><p class='lead'>${msg}</p><p style='margin-top:20px;'>With Love üéÑ<br><strong>${from}</strong></p>`;
  document.getElementById("viewAnother").style.display="inline-block";
}

// Snow animation
const canvas=document.getElementById("snow-canvas");
const ctx=canvas.getContext("2d");
let w=canvas.width=window.innerWidth;
let h=canvas.height=window.innerHeight;

window.addEventListener("resize",()=>{w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;});
const snow=[];
for(let i=0;i<150;i++){snow.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3+1,d:Math.random()+1});}
function draw(){
  ctx.clearRect(0,0,w,h);
  ctx.fillStyle="white";
  ctx.beginPath();
  for(let f of snow){ctx.moveTo(f.x,f.y);ctx.arc(f.x,f.y,f.r,0,Math.PI*2);}
  ctx.fill();
  move();
}
function move(){
  for(let f of snow){f.y+=Math.pow(f.d,2);if(f.y>h){f.y=0;f.x=Math.random()*w;}}
}
setInterval(draw,33);
</script>

</body>
</html>
