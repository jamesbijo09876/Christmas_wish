<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Christmas Countdown</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-1: #0b1320;
    --bg-2: #2b1b3b;
    --accent: #ffd166;
    --muted: rgba(255,255,255,0.8);
  }

  html,body{
    height:100%;
    margin:0;
    font-family:"Poppins", sans-serif;
    background: linear-gradient(180deg, var(--bg-1), var(--bg-2));
    color:white;
    overflow:hidden;
  }

  .wrap{position:relative;height:100vh;display:flex;align-items:center;justify-content:center;padding:48px;box-sizing:border-box;}

  .card{
    width:min(960px,94vw);
    background:rgba(255,255,255,0.03);
    border-radius:18px;
    padding:48px;
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    backdrop-filter:blur(6px);
    position:relative;
    overflow:hidden;
  }

  h1{font-family:"Playfair Display";font-weight:900;margin:0;line-height:0.92;font-size:clamp(36px,8vw,84px);color:white;}
  p.lead{margin:18px 0 28px;opacity:0.95;font-size:1.05rem;}
  #countdown{font-size:1.3rem;margin:16px 0 28px;font-weight:600;color:#ffd166;}

  .btn{
    margin-top:18px;
    padding:12px 24px;
    border:none;
    border-radius:12px;
    background:var(--accent);
    color:#000;
    font-weight:600;
    cursor:pointer;
  }

  footer{margin-top:26px;font-size:0.85rem;color:rgba(255,255,255,0.65);display:flex;justify-content:space-between;}

  #snow-canvas{position:fixed;inset:0;z-index:0;pointer-events:none;}

  /* Modal */
  .modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.75);
    justify-content:center;
    align-items:center;
    z-index:999;
  }

  .modal-content{
    background:white;
    color:black;
    width:90%;
    max-width:420px;
    padding:24px;
    border-radius:14px;
    text-align:center;
  }

  input,textarea{
    width:100%;
    padding:10px;
    margin:10px 0;
    border-radius:8px;
    border:1px solid #999;
  }

  .close-btn{
    background:red;
    color:white;
    margin-top:10px;
  }
</style>

</head>
<body>

<canvas id="snow-canvas"></canvas>

<!-- Background Music -->
<audio id="bg-music" autoplay loop muted>
  <source src="assets/audio/polar-express.mp3" type="audio/mp3">
</audio>

<div class="wrap">
  <div class="card" role="main">
    <h1 id="wish-title">Merry Christmas üéÑ</h1>
    <p class="lead" id="wish-lead">The gift of love. The gift of peace. The gift of happiness. May all these be yours at Christmas.</p>
    <div id="countdown"></div>

    <button class="btn" id="openModalBtn">Send Christmas Wish üéÅ</button>

    <footer>
      <div>Made by <a href="#" style="color:white;text-decoration:none;">Bijo</a></div>
    </footer>
  </div>
</div>

<!-- Modal Popup -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3>Create Your Wish üéÑ</h3>
    <input type="text" id="wishTo" placeholder="To (Person name)">
    <textarea rows="3" id="wishMsg" placeholder="Your Christmas message"></textarea>
    <input type="text" id="wishFrom" placeholder="From">
    <button class="btn" onclick="createLink()">Create Link</button>
    <input type="text" id="generatedLink" readonly style="display:none;">
    <button class="btn" id="copyBtn" style="display:none;" onclick="copyLink()">Copy Link</button>
    <button class="btn close-btn" id="closeModalBtn">Close</button>
  </div>
</div>

<script>
// COUNTDOWN
function updateCountdown() {
  const christmas = new Date("December 25, 2025 00:00:00").getTime();
  const now = new Date().getTime();
  const diff = christmas - now;

  if (diff <= 0) {
    countdown.innerHTML = "üéÖ Merry Christmas! üéÑ";
    return;
  }

  const days = Math.floor(diff/86400000);
  const hours = Math.floor((diff%86400000)/3600000);
  const mins = Math.floor((diff%3600000)/60000);
  const secs = Math.floor((diff%60000)/1000);

  countdown.innerHTML = `${days}d ${hours}h ${mins}m ${secs}s`;
}
setInterval(updateCountdown, 1000);
updateCountdown();

// Modal open/close
const modal=document.getElementById("modal");
document.getElementById("openModalBtn").onclick=()=>modal.style.display="flex";
document.getElementById("closeModalBtn").onclick=()=>modal.style.display="none";

// Create Share Link
function createLink(){
  const to = encodeURIComponent(document.getElementById("wishTo").value);
  const msg = encodeURIComponent(document.getElementById("wishMsg").value);
  const from = encodeURIComponent(document.getElementById("wishFrom").value);

  const link = `${window.location.origin}${window.location.pathname}?to=${to}&msg=${msg}&from=${from}`;
  
  const linkBox=document.getElementById("generatedLink");
  const copyBtn=document.getElementById("copyBtn");
  linkBox.value=link;
  linkBox.style.display="block";
  copyBtn.style.display="block";
}

function copyLink(){
  const linkBox=document.getElementById("generatedLink");
  linkBox.select();
  document.execCommand("copy");
  alert("Link copied ‚úÖ");
}

// Display Shared Wish
const params=new URLSearchParams(window.location.search);
if(params.has("msg")){
  const to=params.get("to");
  const msg=params.get("msg");
  const from=params.get("from");

  countdown.style.display="none";
  document.getElementById("wish-title").innerHTML=`üéÅ Christmas Wish To: <span style="color:#ffd166">${to}</span>`;
  document.getElementById("wish-lead").innerHTML=
    `<div style="white-space:pre-line; font-size:1.3rem; font-weight:600; margin-top:15px;">
      üéÑ ${msg}

      <br><br>
      <strong style="color:#ffd166;">From: ${from}</strong>
    </div>`;
}

// Snow & Music
const canvas=document.getElementById("snow-canvas");
const ctx=canvas.getContext("2d");
let w=canvas.width=window.innerWidth;
let h=canvas.height=window.innerHeight;

window.onresize=()=>{w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;};

const snowflakes=[];
for(let i=0;i<150;i++){snowflakes.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*3+1,d:Math.random()+1});}
function drawSnow(){ctx.clearRect(0,0,w,h);ctx.fillStyle="white";ctx.beginPath();for(let f of snowflakes){ctx.moveTo(f.x,f.y);ctx.arc(f.x,f.y,f.r,0,Math.PI*2);}ctx.fill();moveSnow();}
function moveSnow(){for(let f of snowflakes){f.y+=Math.pow(f.d,2);if(f.y>h){f.y=0;f.x=Math.random()*w;}}}
setInterval(drawSnow,33);

window.addEventListener("click",()=>{
  const music=document.getElementById("bg-music");
  music.muted=false;
  music.play();
},{once:true});
</script>

</body>
</html>
